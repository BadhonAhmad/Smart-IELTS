"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@11labs";
exports.ids = ["vendor-chunks/@11labs"];
exports.modules = {

/***/ "(ssr)/./node_modules/@11labs/client/dist/lib.modern.js":
/*!********************************************************!*\
  !*** ./node_modules/@11labs/client/dist/lib.modern.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Conversation: () => (/* binding */ x),\n/* harmony export */   WebRTCConnection: () => (/* binding */ m),\n/* harmony export */   WebSocketConnection: () => (/* binding */ p),\n/* harmony export */   createConnection: () => (/* binding */ g),\n/* harmony export */   postOverallFeedback: () => (/* binding */ D)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\nfunction o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(null,arguments)}const a=new Uint8Array(0);class i{static getFullOptions(e){return o({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{}},e)}constructor(e,t){var n=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode=\"listening\",this.status=\"connecting\",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=1,this.canSendFeedback=!1,this.endSessionWithDetails=async function(e){\"connected\"!==n.status&&\"connecting\"!==n.status||(n.updateStatus(\"disconnecting\"),await n.handleEndSession(),n.updateStatus(\"disconnected\"),n.options.onDisconnect(e))},this.onMessage=async function(e){switch(e.type){case\"interruption\":return void n.handleInterruption(e);case\"agent_response\":return void n.handleAgentResponse(e);case\"user_transcript\":return void n.handleUserTranscript(e);case\"internal_tentative_agent_response\":return void n.handleTentativeAgentResponse(e);case\"client_tool_call\":return void await n.handleClientToolCall(e);case\"audio\":return void n.handleAudio(e);case\"ping\":return void n.connection.sendMessage({type:\"pong\",event_id:e.ping_event.event_id});default:return void n.options.onDebug(e)}},this.setVolume=({volume:e})=>{this.volume=e},this.options=e,this.connection=t,this.options.onConnect({conversationId:t.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.updateStatus(\"connected\")}endSession(){return this.endSessionWithDetails({reason:\"user\"})}async handleEndSession(){this.connection.close()}updateMode(e){e!==this.mode&&(this.mode=e,this.options.onModeChange({mode:e}))}updateStatus(e){e!==this.status&&(this.status=e,this.options.onStatusChange({status:e}))}updateCanSendFeedback(){const e=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==e&&(this.canSendFeedback=e,this.options.onCanSendFeedbackChange({canSendFeedback:e}))}handleInterruption(e){e.interruption_event&&(this.lastInterruptTimestamp=e.interruption_event.event_id)}handleAgentResponse(e){this.options.onMessage({source:\"ai\",message:e.agent_response_event.agent_response})}handleUserTranscript(e){this.options.onMessage({source:\"user\",message:e.user_transcription_event.user_transcript})}handleTentativeAgentResponse(e){this.options.onDebug({type:\"tentative_agent_response\",response:e.tentative_agent_response_internal_event.tentative_agent_response})}async handleClientToolCall(e){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,e.client_tool_call.tool_name))try{var t;const n=null!=(t=await this.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters))?t:\"Client tool execution successful.\",s=\"object\"==typeof n?JSON.stringify(n):String(n);this.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:s,is_error:!1})}catch(t){this.onError(`Client tool execution failed with following error: ${null==t?void 0:t.message}`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool execution failed: ${null==t?void 0:t.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(e.client_tool_call);this.onError(`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:\"client_tool_result\",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(e){}onError(e,t){console.error(e,t),this.options.onError(e,t)}getId(){return this.connection.conversationId}isOpen(){return\"connected\"===this.status}setMicMuted(e){}getInputByteFrequencyData(){return a}getOutputByteFrequencyData(){return a}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(e){this.canSendFeedback?(this.connection.sendMessage({type:\"feedback\",score:e?\"like\":\"dislike\",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(0===this.lastFeedbackEventId?\"Cannot send feedback: the conversation has not started yet.\":\"Cannot send feedback: feedback has already been sent for the current response.\")}sendContextualUpdate(e){this.connection.sendMessage({type:\"contextual_update\",text:e})}sendUserMessage(e){this.connection.sendMessage({type:\"user_message\",text:e})}sendUserActivity(){this.connection.sendMessage({type:\"user_activity\"})}sendMCPToolApprovalResult(e,t){this.connection.sendMessage({type:\"mcp_tool_approval_result\",tool_call_id:e,is_approved:t})}}class r{constructor(e={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onDebug=void 0,this.onDebug=e.onDebug}debug(e){this.onDebug&&this.onDebug(e)}onMessage(e){this.onMessageCallback=e;const t=this.queue;this.queue=[],t.length>0&&queueMicrotask(()=>{t.forEach(e)})}onDisconnect(e){this.onDisconnectCallback=e;const t=this.disconnectionDetails;t&&queueMicrotask(()=>{e(t)})}disconnect(e){var t;this.disconnectionDetails||(this.disconnectionDetails=e,null==(t=this.onDisconnectCallback)||t.call(this,e))}handleMessage(e){this.onMessageCallback?this.onMessageCallback(e):this.queue.push(e)}}function c(e){const[t,n]=e.split(\"_\");if(![\"pcm\",\"ulaw\"].includes(t))throw new Error(`Invalid format: ${e}`);const s=Number.parseInt(n);if(Number.isNaN(s))throw new Error(`Invalid sample rate: ${n}`);return{format:t,sampleRate:s}}const l=\"0.4.0\";function u(e){return!!e.type}const d=\"conversation_initiation_client_data\";function h(e){const t={type:d};var n,s,o,a,i;return e.overrides&&(t.conversation_config_override={agent:{prompt:null==(n=e.overrides.agent)?void 0:n.prompt,first_message:null==(s=e.overrides.agent)?void 0:s.firstMessage,language:null==(o=e.overrides.agent)?void 0:o.language},tts:{voice_id:null==(a=e.overrides.tts)?void 0:a.voiceId},conversation:{text_only:null==(i=e.overrides.conversation)?void 0:i.textOnly}}),e.customLlmExtraBody&&(t.custom_llm_extra_body=e.customLlmExtraBody),e.dynamicVariables&&(t.dynamic_variables=e.dynamicVariables),e.userId&&(t.user_id=e.userId),t}class p extends r{constructor(e,t,n,s){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=e,this.conversationId=t,this.inputFormat=n,this.outputFormat=s,this.socket.addEventListener(\"error\",e=>{setTimeout(()=>this.disconnect({reason:\"error\",message:\"The connection was closed due to a socket error.\",context:e}),0)}),this.socket.addEventListener(\"close\",e=>{this.disconnect(1e3===e.code?{reason:\"agent\",context:e}:{reason:\"error\",message:e.reason||\"The connection was closed by the server.\",context:e})}),this.socket.addEventListener(\"message\",e=>{try{const t=JSON.parse(e.data);if(!u(t))return;this.handleMessage(t)}catch(e){}})}static async create(e){let t=null;try{var n,s,o;const a=null!=(n=e.origin)?n:\"wss://api.elevenlabs.io\";let i;const r=(null==(s=e.overrides)||null==(s=s.client)?void 0:s.version)||l,d=(null==(o=e.overrides)||null==(o=o.client)?void 0:o.source)||\"js_sdk\";if(e.signedUrl){const t=e.signedUrl.includes(\"?\")?\"&\":\"?\";i=`${e.signedUrl}${t}source=${d}&version=${r}`}else i=`${a}/v1/convai/conversation?agent_id=${e.agentId}&source=${d}&version=${r}`;const m=[\"convai\"];e.authorization&&m.push(`bearer.${e.authorization}`),t=new WebSocket(i,m);const g=await new Promise((n,s)=>{t.addEventListener(\"open\",()=>{var n;const s=h(e);null==(n=t)||n.send(JSON.stringify(s))},{once:!0}),t.addEventListener(\"error\",e=>{setTimeout(()=>s(e),0)}),t.addEventListener(\"close\",s),t.addEventListener(\"message\",e=>{const t=JSON.parse(e.data);u(t)&&(\"conversation_initiation_metadata\"===t.type?n(t.conversation_initiation_metadata_event):console.warn(\"First received message is not conversation metadata.\"))},{once:!0})}),{conversation_id:v,agent_output_audio_format:f,user_input_audio_format:w}=g,y=c(null!=w?w:\"pcm_16000\"),_=c(f);return new p(t,v,y,_)}catch(e){var a;throw null==(a=t)||a.close(),e}}close(){this.socket.close()}sendMessage(e){this.socket.send(JSON.stringify(e))}}class m extends r{constructor(e,t,n,s,o={}){super(o),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.room=e,this.conversationId=t,this.inputFormat=n,this.outputFormat=s,this.setupRoomEventListeners()}static async create(n){let s;if(\"conversationToken\"in n&&n.conversationToken)s=n.conversationToken;else{if(!(\"agentId\"in n)||!n.agentId)throw new Error(\"Either conversationToken or agentId is required for WebRTC connection\");try{var o,a;const e=(null==(o=n.overrides)||null==(o=o.client)?void 0:o.version)||l,t=(null==(a=n.overrides)||null==(a=a.client)?void 0:a.source)||\"js_sdk\",i=`https://api.elevenlabs.io/v1/convai/conversation/token?agent_id=${n.agentId}&source=${t}&version=${e}`,r=await fetch(i);if(!r.ok)throw new Error(`ElevenLabs API returned ${r.status} ${r.statusText}`);if(s=(await r.json()).token,!s)throw new Error(\"No conversation token received from API\")}catch(e){let t=e instanceof Error?e.message:String(e);throw e instanceof Error&&e.message.includes(\"401\")&&(t=\"Your agent has authentication enabled, but no signed URL or conversation token was provided.\"),new Error(`Failed to fetch conversation token for agent ${n.agentId}: ${t}`)}}const i=new livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room;try{const e=`webrtc-${Date.now()}`,o=c(\"pcm_48000\"),a=c(\"pcm_48000\"),r=new m(i,e,o,a,n),l=n.livekitUrl||\"wss://livekit.rtc.elevenlabs.io\";await i.connect(l,s),await new Promise(e=>{if(r.isConnected)e();else{const n=()=>{i.off(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Connected,n),e()};i.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Connected,n)}}),i.name&&(r.conversationId=i.name),await i.localParticipant.setMicrophoneEnabled(!0);const u=h(n);return r.debug({type:d,message:u}),await r.sendMessage(u),r}catch(e){throw await i.disconnect(),e}}setupRoomEventListeners(){var e=this;this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Connected,async function(){e.isConnected=!0,console.info(\"WebRTC room connected\")}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected,e=>{this.isConnected=!1,this.disconnect({reason:\"agent\",context:new CloseEvent(\"close\",{reason:null==e?void 0:e.toString()})})}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,e=>{e===livekit_client__WEBPACK_IMPORTED_MODULE_0__.ConnectionState.Disconnected&&(this.isConnected=!1,this.disconnect({reason:\"error\",message:`LiveKit connection state changed to ${e}`,context:new Event(\"connection_state_changed\")}))}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived,(e,t)=>{try{const t=JSON.parse((new TextDecoder).decode(e));if(\"audio\"===t.type)return;u(t)?this.handleMessage(t):console.warn(\"Invalid socket event received:\",t)}catch(t){console.warn(\"Failed to parse incoming data message:\",t),console.warn(\"Raw payload:\",(new TextDecoder).decode(e))}}),this.room.on(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscribed,async function(e,t,n){if(e.kind===livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Kind.Audio&&n.identity.includes(\"agent\")){const t=e.attach();t.autoplay=!0,t.controls=!1,t.style.display=\"none\",document.body.appendChild(t)}})}close(){this.isConnected&&this.room.disconnect()}async sendMessage(e){if(this.isConnected&&this.room.localParticipant){if(!(\"user_audio_chunk\"in e))try{const t=(new TextEncoder).encode(JSON.stringify(e));await this.room.localParticipant.publishData(t,{reliable:!0})}catch(t){this.debug({type:\"send_message_error\",message:{message:e,error:t}}),console.error(\"Failed to send message via WebRTC:\",t)}}else console.warn(\"Cannot send message: room not connected or no local participant\")}getRoom(){return this.room}}async function g(e){const t=function(e){return e.connectionType?e.connectionType:\"conversationToken\"in e&&e.conversationToken?\"webrtc\":\"websocket\"}(e);switch(t){case\"websocket\":return p.create(e);case\"webrtc\":return m.create(e);default:throw new Error(`Unknown connection type: ${t}`)}}function v(){return[\"iPad Simulator\",\"iPhone Simulator\",\"iPod Simulator\",\"iPad\",\"iPhone\",\"iPod\"].includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"ontouchend\"in document}async function f(e={default:0,android:3e3}){let t=e.default;var n;if(/android/i.test(navigator.userAgent))t=null!=(n=e.android)?n:t;else if(v()){var s;t=null!=(s=e.ios)?s:t}t>0&&await new Promise(e=>setTimeout(e,t))}class w extends i{static async startSession(e){const t=i.getFullOptions(e);t.onStatusChange({status:\"connecting\"}),t.onCanSendFeedbackChange({canSendFeedback:!1});let n=null;try{return await f(t.connectionDelay),n=await g(e),new w(t,n)}catch(e){var s;throw t.onStatusChange({status:\"disconnected\"}),null==(s=n)||s.close(),e}}}function y(e){const t=new Uint8Array(e);return window.btoa(String.fromCharCode(...t))}function _(e){const t=window.atob(e),n=t.length,s=new Uint8Array(n);for(let e=0;e<n;e++)s[e]=t.charCodeAt(e);return s.buffer}const b=new Map;function k(e,t){return async n=>{const s=b.get(e);if(s)return n.addModule(s);const o=new Blob([t],{type:\"application/javascript\"}),a=URL.createObjectURL(o);try{return await n.addModule(a),void b.set(e,a)}catch(e){URL.revokeObjectURL(a)}try{const s=`data:application/javascript;base64,${btoa(t)}`;await n.addModule(s),b.set(e,s)}catch(t){throw new Error(`Failed to load the ${e} worklet module. Make sure the browser supports AudioWorklets.`)}}}const C=k(\"raw-audio-processor\",'\\nconst BIAS = 0x84;\\nconst CLIP = 32635;\\nconst encodeTable = [\\n  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,\\n  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,\\n  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,\\n  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7\\n];\\n\\nfunction encodeSample(sample) {\\n  let sign;\\n  let exponent;\\n  let mantissa;\\n  let muLawSample;\\n  sign = (sample >> 8) & 0x80;\\n  if (sign !== 0) sample = -sample;\\n  sample = sample + BIAS;\\n  if (sample > CLIP) sample = CLIP;\\n  exponent = encodeTable[(sample>>7) & 0xFF];\\n  mantissa = (sample >> (exponent+3)) & 0x0F;\\n  muLawSample = ~(sign | (exponent << 4) | mantissa);\\n  \\n  return muLawSample;\\n}\\n\\nclass RawAudioProcessor extends AudioWorkletProcessor {\\n  constructor() {\\n    super();\\n              \\n    this.port.onmessage = ({ data }) => {\\n      switch (data.type) {\\n        case \"setFormat\":\\n          this.isMuted = false;\\n          this.buffer = []; // Initialize an empty buffer\\n          this.bufferSize = data.sampleRate / 4;\\n          this.format = data.format;\\n\\n          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {\\n            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {\\n              this.resampler = resampler;\\n            });\\n          }\\n          break;\\n        case \"setMuted\":\\n          this.isMuted = data.isMuted;\\n          break;\\n      }\\n    };\\n  }\\n  process(inputs) {\\n    if (!this.buffer) {\\n      return true;\\n    }\\n    \\n    const input = inputs[0]; // Get the first input node\\n    if (input.length > 0) {\\n      let channelData = input[0]; // Get the first channel\\'s data\\n\\n      // Resample the audio if necessary\\n      if (this.resampler) {\\n        channelData = this.resampler.full(channelData);\\n      }\\n\\n      // Add channel data to the buffer\\n      this.buffer.push(...channelData);\\n      // Get max volume \\n      let sum = 0.0;\\n      for (let i = 0; i < channelData.length; i++) {\\n        sum += channelData[i] * channelData[i];\\n      }\\n      const maxVolume = Math.sqrt(sum / channelData.length);\\n      // Check if buffer size has reached or exceeded the threshold\\n      if (this.buffer.length >= this.bufferSize) {\\n        const float32Array = this.isMuted \\n          ? new Float32Array(this.buffer.length)\\n          : new Float32Array(this.buffer);\\n\\n        let encodedArray = this.format === \"ulaw\"\\n          ? new Uint8Array(float32Array.length)\\n          : new Int16Array(float32Array.length);\\n\\n        // Iterate through the Float32Array and convert each sample to PCM16\\n        for (let i = 0; i < float32Array.length; i++) {\\n          // Clamp the value to the range [-1, 1]\\n          let sample = Math.max(-1, Math.min(1, float32Array[i]));\\n\\n          // Scale the sample to the range [-32768, 32767]\\n          let value = sample < 0 ? sample * 32768 : sample * 32767;\\n          if (this.format === \"ulaw\") {\\n            value = encodeSample(Math.round(value));\\n          }\\n\\n          encodedArray[i] = value;\\n        }\\n\\n        // Send the buffered data to the main script\\n        this.port.postMessage([encodedArray, maxVolume]);\\n\\n        // Clear the buffer after sending\\n        this.buffer = [];\\n      }\\n    }\\n    return true; // Continue processing\\n  }\\n}\\nregisterProcessor(\"raw-audio-processor\", RawAudioProcessor);\\n');class S{static async create({sampleRate:e,format:t,preferHeadphonesForIosDevices:n}){let s=null,o=null;try{const a={sampleRate:{ideal:e},echoCancellation:{ideal:!0},noiseSuppression:{ideal:!0}};if(v()&&n){const e=(await window.navigator.mediaDevices.enumerateDevices()).find(e=>\"audioinput\"===e.kind&&[\"airpod\",\"headphone\",\"earphone\"].find(t=>e.label.toLowerCase().includes(t)));e&&(a.deviceId={ideal:e.deviceId})}const i=navigator.mediaDevices.getSupportedConstraints().sampleRate;s=new window.AudioContext(i?{sampleRate:e}:{});const r=s.createAnalyser();i||await s.audioWorklet.addModule(\"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js\"),await C(s.audioWorklet),o=await navigator.mediaDevices.getUserMedia({audio:a});const c=s.createMediaStreamSource(o),l=new AudioWorkletNode(s,\"raw-audio-processor\");return l.port.postMessage({type:\"setFormat\",format:t,sampleRate:e}),c.connect(r),r.connect(l),await s.resume(),new S(s,r,l,o)}catch(e){var a,i;throw null==(a=o)||a.getTracks().forEach(e=>e.stop()),null==(i=s)||i.close(),e}}constructor(e,t,n,s){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.context=e,this.analyser=t,this.worklet=n,this.inputStream=s}async close(){this.inputStream.getTracks().forEach(e=>e.stop()),await this.context.close()}setMuted(e){this.worklet.port.postMessage({type:\"setMuted\",isMuted:e})}}const M=k(\"audio-concat-processor\",'\\nconst decodeTable = [0,132,396,924,1980,4092,8316,16764];\\n\\nexport function decodeSample(muLawSample) {\\n  let sign;\\n  let exponent;\\n  let mantissa;\\n  let sample;\\n  muLawSample = ~muLawSample;\\n  sign = (muLawSample & 0x80);\\n  exponent = (muLawSample >> 4) & 0x07;\\n  mantissa = muLawSample & 0x0F;\\n  sample = decodeTable[exponent] + (mantissa << (exponent+3));\\n  if (sign !== 0) sample = -sample;\\n\\n  return sample;\\n}\\n\\nclass AudioConcatProcessor extends AudioWorkletProcessor {\\n  constructor() {\\n    super();\\n    this.buffers = []; // Initialize an empty buffer\\n    this.cursor = 0;\\n    this.currentBuffer = null;\\n    this.wasInterrupted = false;\\n    this.finished = false;\\n    \\n    this.port.onmessage = ({ data }) => {\\n      switch (data.type) {\\n        case \"setFormat\":\\n          this.format = data.format;\\n          break;\\n        case \"buffer\":\\n          this.wasInterrupted = false;\\n          this.buffers.push(\\n            this.format === \"ulaw\"\\n              ? new Uint8Array(data.buffer)\\n              : new Int16Array(data.buffer)\\n          );\\n          break;\\n        case \"interrupt\":\\n          this.wasInterrupted = true;\\n          break;\\n        case \"clearInterrupted\":\\n          if (this.wasInterrupted) {\\n            this.wasInterrupted = false;\\n            this.buffers = [];\\n            this.currentBuffer = null;\\n          }\\n      }\\n    };\\n  }\\n  process(_, outputs) {\\n    let finished = false;\\n    const output = outputs[0][0];\\n    for (let i = 0; i < output.length; i++) {\\n      if (!this.currentBuffer) {\\n        if (this.buffers.length === 0) {\\n          finished = true;\\n          break;\\n        }\\n        this.currentBuffer = this.buffers.shift();\\n        this.cursor = 0;\\n      }\\n\\n      let value = this.currentBuffer[this.cursor];\\n      if (this.format === \"ulaw\") {\\n        value = decodeSample(value);\\n      }\\n      output[i] = value / 32768;\\n      this.cursor++;\\n\\n      if (this.cursor >= this.currentBuffer.length) {\\n        this.currentBuffer = null;\\n      }\\n    }\\n\\n    if (this.finished !== finished) {\\n      this.finished = finished;\\n      this.port.postMessage({ type: \"process\", finished });\\n    }\\n\\n    return true; // Continue processing\\n  }\\n}\\n\\nregisterProcessor(\"audio-concat-processor\", AudioConcatProcessor);\\n');class I{static async create({sampleRate:e,format:t}){let n=null;try{n=new AudioContext({sampleRate:e});const s=n.createAnalyser(),o=n.createGain();o.connect(s),s.connect(n.destination),await M(n.audioWorklet);const a=new AudioWorkletNode(n,\"audio-concat-processor\");return a.port.postMessage({type:\"setFormat\",format:t}),a.connect(o),await n.resume(),new I(n,s,o,a)}catch(e){var s;throw null==(s=n)||s.close(),e}}constructor(e,t,n,s){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.context=e,this.analyser=t,this.gain=n,this.worklet=s}async close(){await this.context.close()}}class F extends i{static async startSession(e){var t;const n=i.getFullOptions(e);n.onStatusChange({status:\"connecting\"}),n.onCanSendFeedbackChange({canSendFeedback:!1});let s=null,a=null,r=null,c=null,l=null;if(null==(t=e.useWakeLock)||t)try{l=await navigator.wakeLock.request(\"screen\")}catch(e){}try{var u;return c=await navigator.mediaDevices.getUserMedia({audio:!0}),await f(n.connectionDelay),a=await g(e),[s,r]=await Promise.all([S.create(o({},a.inputFormat,{preferHeadphonesForIosDevices:e.preferHeadphonesForIosDevices})),I.create(a.outputFormat)]),null==(u=c)||u.getTracks().forEach(e=>e.stop()),c=null,new F(n,a,s,r,l)}catch(e){var d,h,p,m;n.onStatusChange({status:\"disconnected\"}),null==(d=c)||d.getTracks().forEach(e=>e.stop()),null==(h=a)||h.close(),await(null==(p=s)?void 0:p.close()),await(null==(m=r)?void 0:m.close());try{var v;await(null==(v=l)?void 0:v.release()),l=null}catch(e){}throw e}}constructor(e,t,n,s,o){super(e,t),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.onInputWorkletMessage=e=>{\"connected\"===this.status&&this.connection.sendMessage({user_audio_chunk:y(e.data[0].buffer)})},this.onOutputWorkletMessage=({data:e})=>{\"process\"===e.type&&this.updateMode(e.finished?\"listening\":\"speaking\")},this.addAudioBase64Chunk=e=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:\"clearInterrupted\"}),this.output.worklet.port.postMessage({type:\"buffer\",buffer:_(e)})},this.fadeOutAudio=()=>{this.updateMode(\"listening\"),this.output.worklet.port.postMessage({type:\"interrupt\"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:\"clearInterrupted\"})},2e3)},this.calculateVolume=e=>{if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++)t+=e[n]/255;return t/=e.length,t<0?0:t>1?1:t},this.input=n,this.output=s,this.wakeLock=o,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage}async handleEndSession(){await super.handleEndSession();try{var e;await(null==(e=this.wakeLock)?void 0:e.release()),this.wakeLock=null}catch(e){}await this.input.close(),await this.output.close()}handleInterruption(e){super.handleInterruption(e),this.fadeOutAudio()}handleAudio(e){this.lastInterruptTimestamp<=e.audio_event.event_id&&(this.options.onAudio(e.audio_event.audio_base_64),this.addAudioBase64Chunk(e.audio_event.audio_base_64),this.currentEventId=e.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode(\"speaking\"))}setMicMuted(e){this.input.setMuted(e)}getInputByteFrequencyData(){return null!=this.inputFrequencyData||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return null!=this.outputFrequencyData||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}}function D(e,t,n=\"https://api.elevenlabs.io\"){return fetch(`${n}/v1/convai/conversations/${e}/feedback`,{method:\"POST\",body:JSON.stringify({feedback:t?\"like\":\"dislike\"}),headers:{\"Content-Type\":\"application/json\"}})}class x extends i{static startSession(e){return e.textOnly?w.startSession(e):F.startSession(e)}}\n//# sourceMappingURL=lib.modern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQDExbGFicy9jbGllbnQvZGlzdC9saWIubW9kZXJuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRixhQUFhLHdEQUF3RCxZQUFZLG1CQUFtQixLQUFLLG1CQUFtQixrQkFBa0Isd0NBQXdDLFNBQVMseUJBQXlCLDBCQUEwQixRQUFRLHlCQUF5QixVQUFVLGNBQWMsaUJBQWlCLGVBQWUsb0JBQW9CLGVBQWUsaUJBQWlCLGVBQWUsb0JBQW9CLHNCQUFzQixnQ0FBZ0MsSUFBSSxpQkFBaUIsV0FBVyw0UEFBNFAsdUtBQXVLLGtDQUFrQyxlQUFlLHVEQUF1RCwwREFBMEQsNERBQTRELHNGQUFzRixtRUFBbUUseUNBQXlDLGlEQUFpRCwyQ0FBMkMsRUFBRSwwQ0FBMEMsa0JBQWtCLFNBQVMsSUFBSSxjQUFjLDBEQUEwRCxnQ0FBZ0Msb0lBQW9JLGFBQWEsbUNBQW1DLGNBQWMsRUFBRSx5QkFBeUIsd0JBQXdCLGNBQWMsdURBQXVELE9BQU8sR0FBRyxnQkFBZ0IsNkRBQTZELFNBQVMsR0FBRyx3QkFBd0IsdURBQXVELHdGQUF3RixrQkFBa0IsR0FBRyxzQkFBc0Isa0ZBQWtGLHVCQUF1Qix3QkFBd0IsMERBQTBELEVBQUUsd0JBQXdCLHdCQUF3QixpRUFBaUUsRUFBRSxnQ0FBZ0Msc0JBQXNCLDRHQUE0RyxFQUFFLDhCQUE4QixtR0FBbUcsTUFBTSxxTUFBcU0sNkJBQTZCLDRGQUE0RixFQUFFLFNBQVMsbUVBQW1FLHlCQUF5QixHQUFHLDRDQUE0QywrQkFBK0IsK0dBQStHLHlCQUF5QixjQUFjLEVBQUUsS0FBSyxpSEFBaUgsc0NBQXNDLDhCQUE4QiwyQkFBMkIsNENBQTRDLCtCQUErQix1R0FBdUcsOEJBQThCLHNDQUFzQyxHQUFHLGdCQUFnQixhQUFhLDZDQUE2QyxRQUFRLHNDQUFzQyxTQUFTLGdDQUFnQyxnQkFBZ0IsNEJBQTRCLFNBQVMsNkJBQTZCLFNBQVMsaUJBQWlCLFNBQVMsa0JBQWtCLFNBQVMsZ0JBQWdCLG1E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LHdEQUF3RCxxQ0FBcUMsRUFBRSwrQkFBK0IsT0FBTyxJQUFJLHVFQUF1RSw4QkFBOEIsOEVBQThFLHdCQUF3Qix3Q0FBd0MsMEJBQTBCLEVBQUUsd0JBQXdCLG1FQUFtRSxpQkFBaUIsNkdBQTZHLDhFQUE4RSx3QkFBd0IsRUFBRSxNQUFNLDBCQUEwQix5QkFBeUIsUUFBUSxZQUFZLFdBQVcsZ0JBQWdCLGlDQUFpQyx3S0FBd0sseUJBQXlCLCtCQUErQixJQUFJLE1BQU0scUVBQXFFLFVBQVUsbURBQW1ELHNCQUFzQixnREFBZ0QsZUFBZSxtUUFBbVEsZUFBZSx1QkFBdUIsNEJBQTRCLGdOQUFnTiw2QkFBNkIsc05BQXNOLGlCQUFpQiw4REFBOEQsa0JBQWtCLGdFQUFnRSw4Q0FBOEMsZ0JBQWdCLEVBQUUsMkJBQTJCLEVBQUUsWUFBWSxtQ0FBbUMsNEJBQTRCLFdBQVcsbUNBQW1DLEVBQUUsa0JBQWtCLHVCQUF1Qix1REFBK0s7QUFDNzZ4QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxOb2JlbFxcRGVza3RvcFxcUHJvamVjdHNcXFNtYXJ0IElFTFRTXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAMTFsYWJzXFxjbGllbnRcXGRpc3RcXGxpYi5tb2Rlcm4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e1Jvb20gYXMgZSxSb29tRXZlbnQgYXMgdCxDb25uZWN0aW9uU3RhdGUgYXMgbixUcmFjayBhcyBzfWZyb21cImxpdmVraXQtY2xpZW50XCI7ZnVuY3Rpb24gbygpe3JldHVybiBvPU9iamVjdC5hc3NpZ24/T2JqZWN0LmFzc2lnbi5iaW5kKCk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49YXJndW1lbnRzW3RdO2Zvcih2YXIgcyBpbiBuKSh7fSkuaGFzT3duUHJvcGVydHkuY2FsbChuLHMpJiYoZVtzXT1uW3NdKX1yZXR1cm4gZX0sby5hcHBseShudWxsLGFyZ3VtZW50cyl9Y29uc3QgYT1uZXcgVWludDhBcnJheSgwKTtjbGFzcyBpe3N0YXRpYyBnZXRGdWxsT3B0aW9ucyhlKXtyZXR1cm4gbyh7Y2xpZW50VG9vbHM6e30sb25Db25uZWN0OigpPT57fSxvbkRlYnVnOigpPT57fSxvbkRpc2Nvbm5lY3Q6KCk9Pnt9LG9uRXJyb3I6KCk9Pnt9LG9uTWVzc2FnZTooKT0+e30sb25BdWRpbzooKT0+e30sb25Nb2RlQ2hhbmdlOigpPT57fSxvblN0YXR1c0NoYW5nZTooKT0+e30sb25DYW5TZW5kRmVlZGJhY2tDaGFuZ2U6KCk9Pnt9fSxlKX1jb25zdHJ1Y3RvcihlLHQpe3ZhciBuPXRoaXM7dGhpcy5vcHRpb25zPXZvaWQgMCx0aGlzLmNvbm5lY3Rpb249dm9pZCAwLHRoaXMubGFzdEludGVycnVwdFRpbWVzdGFtcD0wLHRoaXMubW9kZT1cImxpc3RlbmluZ1wiLHRoaXMuc3RhdHVzPVwiY29ubmVjdGluZ1wiLHRoaXMudm9sdW1lPTEsdGhpcy5jdXJyZW50RXZlbnRJZD0xLHRoaXMubGFzdEZlZWRiYWNrRXZlbnRJZD0xLHRoaXMuY2FuU2VuZEZlZWRiYWNrPSExLHRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzPWFzeW5jIGZ1bmN0aW9uKGUpe1wiY29ubmVjdGVkXCIhPT1uLnN0YXR1cyYmXCJjb25uZWN0aW5nXCIhPT1uLnN0YXR1c3x8KG4udXBkYXRlU3RhdHVzKFwiZGlzY29ubmVjdGluZ1wiKSxhd2FpdCBuLmhhbmRsZUVuZFNlc3Npb24oKSxuLnVwZGF0ZVN0YXR1cyhcImRpc2Nvbm5lY3RlZFwiKSxuLm9wdGlvbnMub25EaXNjb25uZWN0KGUpKX0sdGhpcy5vbk1lc3NhZ2U9YXN5bmMgZnVuY3Rpb24oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwiaW50ZXJydXB0aW9uXCI6cmV0dXJuIHZvaWQgbi5oYW5kbGVJbnRlcnJ1cHRpb24oZSk7Y2FzZVwiYWdlbnRfcmVzcG9uc2VcIjpyZXR1cm4gdm9pZCBuLmhhbmRsZUFnZW50UmVzcG9uc2UoZSk7Y2FzZVwidXNlcl90cmFuc2NyaXB0XCI6cmV0dXJuIHZvaWQgbi5oYW5kbGVVc2VyVHJhbnNjcmlwdChlKTtjYXNlXCJpbnRlcm5hbF90ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2VcIjpyZXR1cm4gdm9pZCBuLmhhbmRsZVRlbnRhdGl2ZUFnZW50UmVzcG9uc2UoZSk7Y2FzZVwiY2xpZW50X3Rvb2xfY2FsbFwiOnJldHVybiB2b2lkIGF3YWl0IG4uaGFuZGxlQ2xpZW50VG9vbENhbGwoZSk7Y2FzZVwiYXVkaW9cIjpyZXR1cm4gdm9pZCBuLmhhbmRsZUF1ZGlvKGUpO2Nhc2VcInBpbmdcIjpyZXR1cm4gdm9pZCBuLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe3R5cGU6XCJwb25nXCIsZXZlbnRfaWQ6ZS5waW5nX2V2ZW50LmV2ZW50X2lkfSk7ZGVmYXVsdDpyZXR1cm4gdm9pZCBuLm9wdGlvbnMub25EZWJ1ZyhlKX19LHRoaXMuc2V0Vm9sdW1lPSh7dm9sdW1lOmV9KT0+e3RoaXMudm9sdW1lPWV9LHRoaXMub3B0aW9ucz1lLHRoaXMuY29ubmVjdGlvbj10LHRoaXMub3B0aW9ucy5vbkNvbm5lY3Qoe2NvbnZlcnNhdGlvbklkOnQuY29udmVyc2F0aW9uSWR9KSx0aGlzLmNvbm5lY3Rpb24ub25NZXNzYWdlKHRoaXMub25NZXNzYWdlKSx0aGlzLmNvbm5lY3Rpb24ub25EaXNjb25uZWN0KHRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKSx0aGlzLnVwZGF0ZVN0YXR1cyhcImNvbm5lY3RlZFwiKX1lbmRTZXNzaW9uKCl7cmV0dXJuIHRoaXMuZW5kU2Vzc2lvbldpdGhEZXRhaWxzKHtyZWFzb246XCJ1c2VyXCJ9KX1hc3luYyBoYW5kbGVFbmRTZXNzaW9uKCl7dGhpcy5jb25uZWN0aW9uLmNsb3NlKCl9dXBkYXRlTW9kZShlKXtlIT09dGhpcy5tb2RlJiYodGhpcy5tb2RlPWUsdGhpcy5vcHRpb25zLm9uTW9kZUNoYW5nZSh7bW9kZTplfSkpfXVwZGF0ZVN0YXR1cyhlKXtlIT09dGhpcy5zdGF0dXMmJih0aGlzLnN0YXR1cz1lLHRoaXMub3B0aW9ucy5vblN0YXR1c0NoYW5nZSh7c3RhdHVzOmV9KSl9dXBkYXRlQ2FuU2VuZEZlZWRiYWNrKCl7Y29uc3QgZT10aGlzLmN1cnJlbnRFdmVudElkIT09dGhpcy5sYXN0RmVlZGJhY2tFdmVudElkO3RoaXMuY2FuU2VuZEZlZWRiYWNrIT09ZSYmKHRoaXMuY2FuU2VuZEZlZWRiYWNrPWUsdGhpcy5vcHRpb25zLm9uQ2FuU2VuZEZlZWRiYWNrQ2hhbmdlKHtjYW5TZW5kRmVlZGJhY2s6ZX0pKX1oYW5kbGVJbnRlcnJ1cHRpb24oZSl7ZS5pbnRlcnJ1cHRpb25fZXZlbnQmJih0aGlzLmxhc3RJbnRlcnJ1cHRUaW1lc3RhbXA9ZS5pbnRlcnJ1cHRpb25fZXZlbnQuZXZlbnRfaWQpfWhhbmRsZUFnZW50UmVzcG9uc2UoZSl7dGhpcy5vcHRpb25zLm9uTWVzc2FnZSh7c291cmNlOlwiYWlcIixtZXNzYWdlOmUuYWdlbnRfcmVzcG9uc2VfZXZlbnQuYWdlbnRfcmVzcG9uc2V9KX1oYW5kbGVVc2VyVHJhbnNjcmlwdChlKXt0aGlzLm9wdGlvbnMub25NZXNzYWdlKHtzb3VyY2U6XCJ1c2VyXCIsbWVzc2FnZTplLnVzZXJfdHJhbnNjcmlwdGlvbl9ldmVudC51c2VyX3RyYW5zY3JpcHR9KX1oYW5kbGVUZW50YXRpdmVBZ2VudFJlc3BvbnNlKGUpe3RoaXMub3B0aW9ucy5vbkRlYnVnKHt0eXBlOlwidGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlXCIscmVzcG9uc2U6ZS50ZW50YXRpdmVfYWdlbnRfcmVzcG9uc2VfaW50ZXJuYWxfZXZlbnQudGVudGF0aXZlX2FnZW50X3Jlc3BvbnNlfSl9YXN5bmMgaGFuZGxlQ2xpZW50VG9vbENhbGwoZSl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMub3B0aW9ucy5jbGllbnRUb29scyxlLmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lKSl0cnl7dmFyIHQ7Y29uc3Qgbj1udWxsIT0odD1hd2FpdCB0aGlzLm9wdGlvbnMuY2xpZW50VG9vbHNbZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfbmFtZV0oZS5jbGllbnRfdG9vbF9jYWxsLnBhcmFtZXRlcnMpKT90OlwiQ2xpZW50IHRvb2wgZXhlY3V0aW9uIHN1Y2Nlc3NmdWwuXCIscz1cIm9iamVjdFwiPT10eXBlb2Ygbj9KU09OLnN0cmluZ2lmeShuKTpTdHJpbmcobik7dGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHt0eXBlOlwiY2xpZW50X3Rvb2xfcmVzdWx0XCIsdG9vbF9jYWxsX2lkOmUuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWQscmVzdWx0OnMsaXNfZXJyb3I6ITF9KX1jYXRjaCh0KXt0aGlzLm9uRXJyb3IoYENsaWVudCB0b29sIGV4ZWN1dGlvbiBmYWlsZWQgd2l0aCBmb2xsb3dpbmcgZXJyb3I6ICR7bnVsbD09dD92b2lkIDA6dC5tZXNzYWdlfWAse2NsaWVudFRvb2xOYW1lOmUuY2xpZW50X3Rvb2xfY2FsbC50b29sX25hbWV9KSx0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe3R5cGU6XCJjbGllbnRfdG9vbF9yZXN1bHRcIix0b29sX2NhbGxfaWQ6ZS5jbGllbnRfdG9vbF9jYWxsLnRvb2xfY2FsbF9pZCxyZXN1bHQ6YENsaWVudCB0b29sIGV4ZWN1dGlvbiBmYWlsZWQ6ICR7bnVsbD09dD92b2lkIDA6dC5tZXNzYWdlfWAsaXNfZXJyb3I6ITB9KX1lbHNle2lmKHRoaXMub3B0aW9ucy5vblVuaGFuZGxlZENsaWVudFRvb2xDYWxsKXJldHVybiB2b2lkIHRoaXMub3B0aW9ucy5vblVuaGFuZGxlZENsaWVudFRvb2xDYWxsKGUuY2xpZW50X3Rvb2xfY2FsbCk7dGhpcy5vbkVycm9yKGBDbGllbnQgdG9vbCB3aXRoIG5hbWUgJHtlLmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lfSBpcyBub3QgZGVmaW5lZCBvbiBjbGllbnRgLHtjbGllbnRUb29sTmFtZTplLmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lfSksdGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHt0eXBlOlwiY2xpZW50X3Rvb2xfcmVzdWx0XCIsdG9vbF9jYWxsX2lkOmUuY2xpZW50X3Rvb2xfY2FsbC50b29sX2NhbGxfaWQscmVzdWx0OmBDbGllbnQgdG9vbCB3aXRoIG5hbWUgJHtlLmNsaWVudF90b29sX2NhbGwudG9vbF9uYW1lfSBpcyBub3QgZGVmaW5lZCBvbiBjbGllbnRgLGlzX2Vycm9yOiEwfSl9fWhhbmRsZUF1ZGlvKGUpe31vbkVycm9yKGUsdCl7Y29uc29sZS5lcnJvcihlLHQpLHRoaXMub3B0aW9ucy5vbkVycm9yKGUsdCl9Z2V0SWQoKXtyZXR1cm4gdGhpcy5jb25uZWN0aW9uLmNvbnZlcnNhdGlvbklkfWlzT3Blbigpe3JldHVyblwiY29ubmVjdGVkXCI9PT10aGlzLnN0YXR1c31zZXRNaWNNdXRlZChlKXt9Z2V0SW5wdXRCeXRlRnJlcXVlbmN5RGF0YSgpe3JldHVybiBhfWdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl7cmV0dXJuIGF9Z2V0SW5wdXRWb2x1bWUoKXtyZXR1cm4gMH1nZXRPdXRwdXRWb2x1bWUoKXtyZXR1cm4gMH1zZW5kRmVlZGJhY2soZSl7dGhpcy5jYW5TZW5kRmVlZGJhY2s/KHRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcImZlZWRiYWNrXCIsc2NvcmU6ZT9cImxpa2VcIjpcImRpc2xpa2VcIixldmVudF9pZDp0aGlzLmN1cnJlbnRFdmVudElkfSksdGhpcy5sYXN0RmVlZGJhY2tFdmVudElkPXRoaXMuY3VycmVudEV2ZW50SWQsdGhpcy51cGRhdGVDYW5TZW5kRmVlZGJhY2soKSk6Y29uc29sZS53YXJuKDA9PT10aGlzLmxhc3RGZWVkYmFja0V2ZW50SWQ/XCJDYW5ub3Qgc2VuZCBmZWVkYmFjazogdGhlIGNvbnZlcnNhdGlvbiBoYXMgbm90IHN0YXJ0ZWQgeWV0LlwiOlwiQ2Fubm90IHNlbmQgZmVlZGJhY2s6IGZlZWRiYWNrIGhhcyBhbHJlYWR5IGJlZW4gc2VudCBmb3IgdGhlIGN1cnJlbnQgcmVzcG9uc2UuXCIpfXNlbmRDb250ZXh0dWFsVXBkYXRlKGUpe3RoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcImNvbnRleHR1YWxfdXBkYXRlXCIsdGV4dDplfSl9c2VuZFVzZXJNZXNzYWdlKGUpe3RoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dHlwZTpcInVzZXJfbWVzc2FnZVwiLHRleHQ6ZX0pfXNlbmRVc2VyQWN0aXZpdHkoKXt0aGlzLmNvbm5lY3Rpb24uc2VuZE1lc3NhZ2Uoe3R5cGU6XCJ1c2VyX2FjdGl2aXR5XCJ9KX1zZW5kTUNQVG9vbEFwcHJvdmFsUmVzdWx0KGUsdCl7dGhpcy5jb25uZWN0aW9uLnNlbmRNZXNzYWdlKHt0eXBlOlwibWNwX3Rvb2xfYXBwcm92YWxfcmVzdWx0XCIsdG9vbF9jYWxsX2lkOmUsaXNfYXBwcm92ZWQ6dH0pfX1jbGFzcyBye2NvbnN0cnVjdG9yKGU9e30pe3RoaXMucXVldWU9W10sdGhpcy5kaXNjb25uZWN0aW9uRGV0YWlscz1udWxsLHRoaXMub25EaXNjb25uZWN0Q2FsbGJhY2s9bnVsbCx0aGlzLm9uTWVzc2FnZUNhbGxiYWNrPW51bGwsdGhpcy5vbkRlYnVnPXZvaWQgMCx0aGlzLm9uRGVidWc9ZS5vbkRlYnVnfWRlYnVnKGUpe3RoaXMub25EZWJ1ZyYmdGhpcy5vbkRlYnVnKGUpfW9uTWVzc2FnZShlKXt0aGlzLm9uTWVzc2FnZUNhbGxiYWNrPWU7Y29uc3QgdD10aGlzLnF1ZXVlO3RoaXMucXVldWU9W10sdC5sZW5ndGg+MCYmcXVldWVNaWNyb3Rhc2soKCk9Pnt0LmZvckVhY2goZSl9KX1vbkRpc2Nvbm5lY3QoZSl7dGhpcy5vbkRpc2Nvbm5lY3RDYWxsYmFjaz1lO2NvbnN0IHQ9dGhpcy5kaXNjb25uZWN0aW9uRGV0YWlsczt0JiZxdWV1ZU1pY3JvdGFzaygoKT0+e2UodCl9KX1kaXNjb25uZWN0KGUpe3ZhciB0O3RoaXMuZGlzY29ubmVjdGlvbkRldGFpbHN8fCh0aGlzLmRpc2Nvbm5lY3Rpb25EZXRhaWxzPWUsbnVsbD09KHQ9dGhpcy5vbkRpc2Nvbm5lY3RDYWxsYmFjayl8fHQuY2FsbCh0aGlzLGUpKX1oYW5kbGVNZXNzYWdlKGUpe3RoaXMub25NZXNzYWdlQ2FsbGJhY2s/dGhpcy5vbk1lc3NhZ2VDYWxsYmFjayhlKTp0aGlzLnF1ZXVlLnB1c2goZSl9fWZ1bmN0aW9uIGMoZSl7Y29uc3RbdCxuXT1lLnNwbGl0KFwiX1wiKTtpZighW1wicGNtXCIsXCJ1bGF3XCJdLmluY2x1ZGVzKHQpKXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmb3JtYXQ6ICR7ZX1gKTtjb25zdCBzPU51bWJlci5wYXJzZUludChuKTtpZihOdW1iZXIuaXNOYU4ocykpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNhbXBsZSByYXRlOiAke259YCk7cmV0dXJue2Zvcm1hdDp0LHNhbXBsZVJhdGU6c319Y29uc3QgbD1cIjAuNC4wXCI7ZnVuY3Rpb24gdShlKXtyZXR1cm4hIWUudHlwZX1jb25zdCBkPVwiY29udmVyc2F0aW9uX2luaXRpYXRpb25fY2xpZW50X2RhdGFcIjtmdW5jdGlvbiBoKGUpe2NvbnN0IHQ9e3R5cGU6ZH07dmFyIG4scyxvLGEsaTtyZXR1cm4gZS5vdmVycmlkZXMmJih0LmNvbnZlcnNhdGlvbl9jb25maWdfb3ZlcnJpZGU9e2FnZW50Ontwcm9tcHQ6bnVsbD09KG49ZS5vdmVycmlkZXMuYWdlbnQpP3ZvaWQgMDpuLnByb21wdCxmaXJzdF9tZXNzYWdlOm51bGw9PShzPWUub3ZlcnJpZGVzLmFnZW50KT92b2lkIDA6cy5maXJzdE1lc3NhZ2UsbGFuZ3VhZ2U6bnVsbD09KG89ZS5vdmVycmlkZXMuYWdlbnQpP3ZvaWQgMDpvLmxhbmd1YWdlfSx0dHM6e3ZvaWNlX2lkOm51bGw9PShhPWUub3ZlcnJpZGVzLnR0cyk/dm9pZCAwOmEudm9pY2VJZH0sY29udmVyc2F0aW9uOnt0ZXh0X29ubHk6bnVsbD09KGk9ZS5vdmVycmlkZXMuY29udmVyc2F0aW9uKT92b2lkIDA6aS50ZXh0T25seX19KSxlLmN1c3RvbUxsbUV4dHJhQm9keSYmKHQuY3VzdG9tX2xsbV9leHRyYV9ib2R5PWUuY3VzdG9tTGxtRXh0cmFCb2R5KSxlLmR5bmFtaWNWYXJpYWJsZXMmJih0LmR5bmFtaWNfdmFyaWFibGVzPWUuZHluYW1pY1ZhcmlhYmxlcyksZS51c2VySWQmJih0LnVzZXJfaWQ9ZS51c2VySWQpLHR9Y2xhc3MgcCBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSx0LG4scyl7c3VwZXIoKSx0aGlzLnNvY2tldD12b2lkIDAsdGhpcy5jb252ZXJzYXRpb25JZD12b2lkIDAsdGhpcy5pbnB1dEZvcm1hdD12b2lkIDAsdGhpcy5vdXRwdXRGb3JtYXQ9dm9pZCAwLHRoaXMuc29ja2V0PWUsdGhpcy5jb252ZXJzYXRpb25JZD10LHRoaXMuaW5wdXRGb3JtYXQ9bix0aGlzLm91dHB1dEZvcm1hdD1zLHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGU9PntzZXRUaW1lb3V0KCgpPT50aGlzLmRpc2Nvbm5lY3Qoe3JlYXNvbjpcImVycm9yXCIsbWVzc2FnZTpcIlRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgZHVlIHRvIGEgc29ja2V0IGVycm9yLlwiLGNvbnRleHQ6ZX0pLDApfSksdGhpcy5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsZT0+e3RoaXMuZGlzY29ubmVjdCgxZTM9PT1lLmNvZGU/e3JlYXNvbjpcImFnZW50XCIsY29udGV4dDplfTp7cmVhc29uOlwiZXJyb3JcIixtZXNzYWdlOmUucmVhc29ufHxcIlRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYnkgdGhlIHNlcnZlci5cIixjb250ZXh0OmV9KX0pLHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZT0+e3RyeXtjb25zdCB0PUpTT04ucGFyc2UoZS5kYXRhKTtpZighdSh0KSlyZXR1cm47dGhpcy5oYW5kbGVNZXNzYWdlKHQpfWNhdGNoKGUpe319KX1zdGF0aWMgYXN5bmMgY3JlYXRlKGUpe2xldCB0PW51bGw7dHJ5e3ZhciBuLHMsbztjb25zdCBhPW51bGwhPShuPWUub3JpZ2luKT9uOlwid3NzOi8vYXBpLmVsZXZlbmxhYnMuaW9cIjtsZXQgaTtjb25zdCByPShudWxsPT0ocz1lLm92ZXJyaWRlcyl8fG51bGw9PShzPXMuY2xpZW50KT92b2lkIDA6cy52ZXJzaW9uKXx8bCxkPShudWxsPT0obz1lLm92ZXJyaWRlcyl8fG51bGw9PShvPW8uY2xpZW50KT92b2lkIDA6by5zb3VyY2UpfHxcImpzX3Nka1wiO2lmKGUuc2lnbmVkVXJsKXtjb25zdCB0PWUuc2lnbmVkVXJsLmluY2x1ZGVzKFwiP1wiKT9cIiZcIjpcIj9cIjtpPWAke2Uuc2lnbmVkVXJsfSR7dH1zb3VyY2U9JHtkfSZ2ZXJzaW9uPSR7cn1gfWVsc2UgaT1gJHthfS92MS9jb252YWkvY29udmVyc2F0aW9uP2FnZW50X2lkPSR7ZS5hZ2VudElkfSZzb3VyY2U9JHtkfSZ2ZXJzaW9uPSR7cn1gO2NvbnN0IG09W1wiY29udmFpXCJdO2UuYXV0aG9yaXphdGlvbiYmbS5wdXNoKGBiZWFyZXIuJHtlLmF1dGhvcml6YXRpb259YCksdD1uZXcgV2ViU29ja2V0KGksbSk7Y29uc3QgZz1hd2FpdCBuZXcgUHJvbWlzZSgobixzKT0+e3QuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwoKT0+e3ZhciBuO2NvbnN0IHM9aChlKTtudWxsPT0obj10KXx8bi5zZW5kKEpTT04uc3RyaW5naWZ5KHMpKX0se29uY2U6ITB9KSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGU9PntzZXRUaW1lb3V0KCgpPT5zKGUpLDApfSksdC5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIixzKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZT0+e2NvbnN0IHQ9SlNPTi5wYXJzZShlLmRhdGEpO3UodCkmJihcImNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhXCI9PT10LnR5cGU/bih0LmNvbnZlcnNhdGlvbl9pbml0aWF0aW9uX21ldGFkYXRhX2V2ZW50KTpjb25zb2xlLndhcm4oXCJGaXJzdCByZWNlaXZlZCBtZXNzYWdlIGlzIG5vdCBjb252ZXJzYXRpb24gbWV0YWRhdGEuXCIpKX0se29uY2U6ITB9KX0pLHtjb252ZXJzYXRpb25faWQ6dixhZ2VudF9vdXRwdXRfYXVkaW9fZm9ybWF0OmYsdXNlcl9pbnB1dF9hdWRpb19mb3JtYXQ6d309Zyx5PWMobnVsbCE9dz93OlwicGNtXzE2MDAwXCIpLF89YyhmKTtyZXR1cm4gbmV3IHAodCx2LHksXyl9Y2F0Y2goZSl7dmFyIGE7dGhyb3cgbnVsbD09KGE9dCl8fGEuY2xvc2UoKSxlfX1jbG9zZSgpe3RoaXMuc29ja2V0LmNsb3NlKCl9c2VuZE1lc3NhZ2UoZSl7dGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShlKSl9fWNsYXNzIG0gZXh0ZW5kcyBye2NvbnN0cnVjdG9yKGUsdCxuLHMsbz17fSl7c3VwZXIobyksdGhpcy5jb252ZXJzYXRpb25JZD12b2lkIDAsdGhpcy5pbnB1dEZvcm1hdD12b2lkIDAsdGhpcy5vdXRwdXRGb3JtYXQ9dm9pZCAwLHRoaXMucm9vbT12b2lkIDAsdGhpcy5pc0Nvbm5lY3RlZD0hMSx0aGlzLnJvb209ZSx0aGlzLmNvbnZlcnNhdGlvbklkPXQsdGhpcy5pbnB1dEZvcm1hdD1uLHRoaXMub3V0cHV0Rm9ybWF0PXMsdGhpcy5zZXR1cFJvb21FdmVudExpc3RlbmVycygpfXN0YXRpYyBhc3luYyBjcmVhdGUobil7bGV0IHM7aWYoXCJjb252ZXJzYXRpb25Ub2tlblwiaW4gbiYmbi5jb252ZXJzYXRpb25Ub2tlbilzPW4uY29udmVyc2F0aW9uVG9rZW47ZWxzZXtpZighKFwiYWdlbnRJZFwiaW4gbil8fCFuLmFnZW50SWQpdGhyb3cgbmV3IEVycm9yKFwiRWl0aGVyIGNvbnZlcnNhdGlvblRva2VuIG9yIGFnZW50SWQgaXMgcmVxdWlyZWQgZm9yIFdlYlJUQyBjb25uZWN0aW9uXCIpO3RyeXt2YXIgbyxhO2NvbnN0IGU9KG51bGw9PShvPW4ub3ZlcnJpZGVzKXx8bnVsbD09KG89by5jbGllbnQpP3ZvaWQgMDpvLnZlcnNpb24pfHxsLHQ9KG51bGw9PShhPW4ub3ZlcnJpZGVzKXx8bnVsbD09KGE9YS5jbGllbnQpP3ZvaWQgMDphLnNvdXJjZSl8fFwianNfc2RrXCIsaT1gaHR0cHM6Ly9hcGkuZWxldmVubGFicy5pby92MS9jb252YWkvY29udmVyc2F0aW9uL3Rva2VuP2FnZW50X2lkPSR7bi5hZ2VudElkfSZzb3VyY2U9JHt0fSZ2ZXJzaW9uPSR7ZX1gLHI9YXdhaXQgZmV0Y2goaSk7aWYoIXIub2spdGhyb3cgbmV3IEVycm9yKGBFbGV2ZW5MYWJzIEFQSSByZXR1cm5lZCAke3Iuc3RhdHVzfSAke3Iuc3RhdHVzVGV4dH1gKTtpZihzPShhd2FpdCByLmpzb24oKSkudG9rZW4sIXMpdGhyb3cgbmV3IEVycm9yKFwiTm8gY29udmVyc2F0aW9uIHRva2VuIHJlY2VpdmVkIGZyb20gQVBJXCIpfWNhdGNoKGUpe2xldCB0PWUgaW5zdGFuY2VvZiBFcnJvcj9lLm1lc3NhZ2U6U3RyaW5nKGUpO3Rocm93IGUgaW5zdGFuY2VvZiBFcnJvciYmZS5tZXNzYWdlLmluY2x1ZGVzKFwiNDAxXCIpJiYodD1cIllvdXIgYWdlbnQgaGFzIGF1dGhlbnRpY2F0aW9uIGVuYWJsZWQsIGJ1dCBubyBzaWduZWQgVVJMIG9yIGNvbnZlcnNhdGlvbiB0b2tlbiB3YXMgcHJvdmlkZWQuXCIpLG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGNvbnZlcnNhdGlvbiB0b2tlbiBmb3IgYWdlbnQgJHtuLmFnZW50SWR9OiAke3R9YCl9fWNvbnN0IGk9bmV3IGU7dHJ5e2NvbnN0IGU9YHdlYnJ0Yy0ke0RhdGUubm93KCl9YCxvPWMoXCJwY21fNDgwMDBcIiksYT1jKFwicGNtXzQ4MDAwXCIpLHI9bmV3IG0oaSxlLG8sYSxuKSxsPW4ubGl2ZWtpdFVybHx8XCJ3c3M6Ly9saXZla2l0LnJ0Yy5lbGV2ZW5sYWJzLmlvXCI7YXdhaXQgaS5jb25uZWN0KGwscyksYXdhaXQgbmV3IFByb21pc2UoZT0+e2lmKHIuaXNDb25uZWN0ZWQpZSgpO2Vsc2V7Y29uc3Qgbj0oKT0+e2kub2ZmKHQuQ29ubmVjdGVkLG4pLGUoKX07aS5vbih0LkNvbm5lY3RlZCxuKX19KSxpLm5hbWUmJihyLmNvbnZlcnNhdGlvbklkPWkubmFtZSksYXdhaXQgaS5sb2NhbFBhcnRpY2lwYW50LnNldE1pY3JvcGhvbmVFbmFibGVkKCEwKTtjb25zdCB1PWgobik7cmV0dXJuIHIuZGVidWcoe3R5cGU6ZCxtZXNzYWdlOnV9KSxhd2FpdCByLnNlbmRNZXNzYWdlKHUpLHJ9Y2F0Y2goZSl7dGhyb3cgYXdhaXQgaS5kaXNjb25uZWN0KCksZX19c2V0dXBSb29tRXZlbnRMaXN0ZW5lcnMoKXt2YXIgZT10aGlzO3RoaXMucm9vbS5vbih0LkNvbm5lY3RlZCxhc3luYyBmdW5jdGlvbigpe2UuaXNDb25uZWN0ZWQ9ITAsY29uc29sZS5pbmZvKFwiV2ViUlRDIHJvb20gY29ubmVjdGVkXCIpfSksdGhpcy5yb29tLm9uKHQuRGlzY29ubmVjdGVkLGU9Pnt0aGlzLmlzQ29ubmVjdGVkPSExLHRoaXMuZGlzY29ubmVjdCh7cmVhc29uOlwiYWdlbnRcIixjb250ZXh0Om5ldyBDbG9zZUV2ZW50KFwiY2xvc2VcIix7cmVhc29uOm51bGw9PWU/dm9pZCAwOmUudG9TdHJpbmcoKX0pfSl9KSx0aGlzLnJvb20ub24odC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLGU9PntlPT09bi5EaXNjb25uZWN0ZWQmJih0aGlzLmlzQ29ubmVjdGVkPSExLHRoaXMuZGlzY29ubmVjdCh7cmVhc29uOlwiZXJyb3JcIixtZXNzYWdlOmBMaXZlS2l0IGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlZCB0byAke2V9YCxjb250ZXh0Om5ldyBFdmVudChcImNvbm5lY3Rpb25fc3RhdGVfY2hhbmdlZFwiKX0pKX0pLHRoaXMucm9vbS5vbih0LkRhdGFSZWNlaXZlZCwoZSx0KT0+e3RyeXtjb25zdCB0PUpTT04ucGFyc2UoKG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKGUpKTtpZihcImF1ZGlvXCI9PT10LnR5cGUpcmV0dXJuO3UodCk/dGhpcy5oYW5kbGVNZXNzYWdlKHQpOmNvbnNvbGUud2FybihcIkludmFsaWQgc29ja2V0IGV2ZW50IHJlY2VpdmVkOlwiLHQpfWNhdGNoKHQpe2NvbnNvbGUud2FybihcIkZhaWxlZCB0byBwYXJzZSBpbmNvbWluZyBkYXRhIG1lc3NhZ2U6XCIsdCksY29uc29sZS53YXJuKFwiUmF3IHBheWxvYWQ6XCIsKG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKGUpKX19KSx0aGlzLnJvb20ub24odC5UcmFja1N1YnNjcmliZWQsYXN5bmMgZnVuY3Rpb24oZSx0LG4pe2lmKGUua2luZD09PXMuS2luZC5BdWRpbyYmbi5pZGVudGl0eS5pbmNsdWRlcyhcImFnZW50XCIpKXtjb25zdCB0PWUuYXR0YWNoKCk7dC5hdXRvcGxheT0hMCx0LmNvbnRyb2xzPSExLHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpfX0pfWNsb3NlKCl7dGhpcy5pc0Nvbm5lY3RlZCYmdGhpcy5yb29tLmRpc2Nvbm5lY3QoKX1hc3luYyBzZW5kTWVzc2FnZShlKXtpZih0aGlzLmlzQ29ubmVjdGVkJiZ0aGlzLnJvb20ubG9jYWxQYXJ0aWNpcGFudCl7aWYoIShcInVzZXJfYXVkaW9fY2h1bmtcImluIGUpKXRyeXtjb25zdCB0PShuZXcgVGV4dEVuY29kZXIpLmVuY29kZShKU09OLnN0cmluZ2lmeShlKSk7YXdhaXQgdGhpcy5yb29tLmxvY2FsUGFydGljaXBhbnQucHVibGlzaERhdGEodCx7cmVsaWFibGU6ITB9KX1jYXRjaCh0KXt0aGlzLmRlYnVnKHt0eXBlOlwic2VuZF9tZXNzYWdlX2Vycm9yXCIsbWVzc2FnZTp7bWVzc2FnZTplLGVycm9yOnR9fSksY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIG1lc3NhZ2UgdmlhIFdlYlJUQzpcIix0KX19ZWxzZSBjb25zb2xlLndhcm4oXCJDYW5ub3Qgc2VuZCBtZXNzYWdlOiByb29tIG5vdCBjb25uZWN0ZWQgb3Igbm8gbG9jYWwgcGFydGljaXBhbnRcIil9Z2V0Um9vbSgpe3JldHVybiB0aGlzLnJvb219fWFzeW5jIGZ1bmN0aW9uIGcoZSl7Y29uc3QgdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb25uZWN0aW9uVHlwZT9lLmNvbm5lY3Rpb25UeXBlOlwiY29udmVyc2F0aW9uVG9rZW5cImluIGUmJmUuY29udmVyc2F0aW9uVG9rZW4/XCJ3ZWJydGNcIjpcIndlYnNvY2tldFwifShlKTtzd2l0Y2godCl7Y2FzZVwid2Vic29ja2V0XCI6cmV0dXJuIHAuY3JlYXRlKGUpO2Nhc2VcIndlYnJ0Y1wiOnJldHVybiBtLmNyZWF0ZShlKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5rbm93biBjb25uZWN0aW9uIHR5cGU6ICR7dH1gKX19ZnVuY3Rpb24gdigpe3JldHVybltcImlQYWQgU2ltdWxhdG9yXCIsXCJpUGhvbmUgU2ltdWxhdG9yXCIsXCJpUG9kIFNpbXVsYXRvclwiLFwiaVBhZFwiLFwiaVBob25lXCIsXCJpUG9kXCJdLmluY2x1ZGVzKG5hdmlnYXRvci5wbGF0Zm9ybSl8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJNYWNcIikmJlwib250b3VjaGVuZFwiaW4gZG9jdW1lbnR9YXN5bmMgZnVuY3Rpb24gZihlPXtkZWZhdWx0OjAsYW5kcm9pZDozZTN9KXtsZXQgdD1lLmRlZmF1bHQ7dmFyIG47aWYoL2FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXQ9bnVsbCE9KG49ZS5hbmRyb2lkKT9uOnQ7ZWxzZSBpZih2KCkpe3ZhciBzO3Q9bnVsbCE9KHM9ZS5pb3MpP3M6dH10PjAmJmF3YWl0IG5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSx0KSl9Y2xhc3MgdyBleHRlbmRzIGl7c3RhdGljIGFzeW5jIHN0YXJ0U2Vzc2lvbihlKXtjb25zdCB0PWkuZ2V0RnVsbE9wdGlvbnMoZSk7dC5vblN0YXR1c0NoYW5nZSh7c3RhdHVzOlwiY29ubmVjdGluZ1wifSksdC5vbkNhblNlbmRGZWVkYmFja0NoYW5nZSh7Y2FuU2VuZEZlZWRiYWNrOiExfSk7bGV0IG49bnVsbDt0cnl7cmV0dXJuIGF3YWl0IGYodC5jb25uZWN0aW9uRGVsYXkpLG49YXdhaXQgZyhlKSxuZXcgdyh0LG4pfWNhdGNoKGUpe3ZhciBzO3Rocm93IHQub25TdGF0dXNDaGFuZ2Uoe3N0YXR1czpcImRpc2Nvbm5lY3RlZFwifSksbnVsbD09KHM9bil8fHMuY2xvc2UoKSxlfX19ZnVuY3Rpb24geShlKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KGUpO3JldHVybiB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnQpKX1mdW5jdGlvbiBfKGUpe2NvbnN0IHQ9d2luZG93LmF0b2IoZSksbj10Lmxlbmd0aCxzPW5ldyBVaW50OEFycmF5KG4pO2ZvcihsZXQgZT0wO2U8bjtlKyspc1tlXT10LmNoYXJDb2RlQXQoZSk7cmV0dXJuIHMuYnVmZmVyfWNvbnN0IGI9bmV3IE1hcDtmdW5jdGlvbiBrKGUsdCl7cmV0dXJuIGFzeW5jIG49Pntjb25zdCBzPWIuZ2V0KGUpO2lmKHMpcmV0dXJuIG4uYWRkTW9kdWxlKHMpO2NvbnN0IG89bmV3IEJsb2IoW3RdLHt0eXBlOlwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwifSksYT1VUkwuY3JlYXRlT2JqZWN0VVJMKG8pO3RyeXtyZXR1cm4gYXdhaXQgbi5hZGRNb2R1bGUoYSksdm9pZCBiLnNldChlLGEpfWNhdGNoKGUpe1VSTC5yZXZva2VPYmplY3RVUkwoYSl9dHJ5e2NvbnN0IHM9YGRhdGE6YXBwbGljYXRpb24vamF2YXNjcmlwdDtiYXNlNjQsJHtidG9hKHQpfWA7YXdhaXQgbi5hZGRNb2R1bGUocyksYi5zZXQoZSxzKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHRoZSAke2V9IHdvcmtsZXQgbW9kdWxlLiBNYWtlIHN1cmUgdGhlIGJyb3dzZXIgc3VwcG9ydHMgQXVkaW9Xb3JrbGV0cy5gKX19fWNvbnN0IEM9ayhcInJhdy1hdWRpby1wcm9jZXNzb3JcIiwnXFxuY29uc3QgQklBUyA9IDB4ODQ7XFxuY29uc3QgQ0xJUCA9IDMyNjM1O1xcbmNvbnN0IGVuY29kZVRhYmxlID0gW1xcbiAgMCwwLDEsMSwyLDIsMiwyLDMsMywzLDMsMywzLDMsMyxcXG4gIDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsXFxuICA1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LFxcbiAgNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSxcXG4gIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXFxuICA2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LFxcbiAgNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNixcXG4gIDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsXFxuICA3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LFxcbiAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcXG4gIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXFxuICA3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LFxcbiAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyxcXG4gIDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsXFxuICA3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LFxcbiAgNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsN1xcbl07XFxuXFxuZnVuY3Rpb24gZW5jb2RlU2FtcGxlKHNhbXBsZSkge1xcbiAgbGV0IHNpZ247XFxuICBsZXQgZXhwb25lbnQ7XFxuICBsZXQgbWFudGlzc2E7XFxuICBsZXQgbXVMYXdTYW1wbGU7XFxuICBzaWduID0gKHNhbXBsZSA+PiA4KSAmIDB4ODA7XFxuICBpZiAoc2lnbiAhPT0gMCkgc2FtcGxlID0gLXNhbXBsZTtcXG4gIHNhbXBsZSA9IHNhbXBsZSArIEJJQVM7XFxuICBpZiAoc2FtcGxlID4gQ0xJUCkgc2FtcGxlID0gQ0xJUDtcXG4gIGV4cG9uZW50ID0gZW5jb2RlVGFibGVbKHNhbXBsZT4+NykgJiAweEZGXTtcXG4gIG1hbnRpc3NhID0gKHNhbXBsZSA+PiAoZXhwb25lbnQrMykpICYgMHgwRjtcXG4gIG11TGF3U2FtcGxlID0gfihzaWduIHwgKGV4cG9uZW50IDw8IDQpIHwgbWFudGlzc2EpO1xcbiAgXFxuICByZXR1cm4gbXVMYXdTYW1wbGU7XFxufVxcblxcbmNsYXNzIFJhd0F1ZGlvUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHtcXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICBzdXBlcigpO1xcbiAgICAgICAgICAgICAgXFxuICAgIHRoaXMucG9ydC5vbm1lc3NhZ2UgPSAoeyBkYXRhIH0pID0+IHtcXG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xcbiAgICAgICAgY2FzZSBcInNldEZvcm1hdFwiOlxcbiAgICAgICAgICB0aGlzLmlzTXV0ZWQgPSBmYWxzZTtcXG4gICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBidWZmZXJcXG4gICAgICAgICAgdGhpcy5idWZmZXJTaXplID0gZGF0YS5zYW1wbGVSYXRlIC8gNDtcXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSBkYXRhLmZvcm1hdDtcXG5cXG4gICAgICAgICAgaWYgKGdsb2JhbFRoaXMuTGliU2FtcGxlUmF0ZSAmJiBzYW1wbGVSYXRlICE9PSBkYXRhLnNhbXBsZVJhdGUpIHtcXG4gICAgICAgICAgICBnbG9iYWxUaGlzLkxpYlNhbXBsZVJhdGUuY3JlYXRlKDEsIHNhbXBsZVJhdGUsIGRhdGEuc2FtcGxlUmF0ZSkudGhlbihyZXNhbXBsZXIgPT4ge1xcbiAgICAgICAgICAgICAgdGhpcy5yZXNhbXBsZXIgPSByZXNhbXBsZXI7XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFwic2V0TXV0ZWRcIjpcXG4gICAgICAgICAgdGhpcy5pc011dGVkID0gZGF0YS5pc011dGVkO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICB9XFxuICAgIH07XFxuICB9XFxuICBwcm9jZXNzKGlucHV0cykge1xcbiAgICBpZiAoIXRoaXMuYnVmZmVyKSB7XFxuICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cXG4gICAgXFxuICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOyAvLyBHZXQgdGhlIGZpcnN0IGlucHV0IG5vZGVcXG4gICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcXG4gICAgICBsZXQgY2hhbm5lbERhdGEgPSBpbnB1dFswXTsgLy8gR2V0IHRoZSBmaXJzdCBjaGFubmVsXFwncyBkYXRhXFxuXFxuICAgICAgLy8gUmVzYW1wbGUgdGhlIGF1ZGlvIGlmIG5lY2Vzc2FyeVxcbiAgICAgIGlmICh0aGlzLnJlc2FtcGxlcikge1xcbiAgICAgICAgY2hhbm5lbERhdGEgPSB0aGlzLnJlc2FtcGxlci5mdWxsKGNoYW5uZWxEYXRhKTtcXG4gICAgICB9XFxuXFxuICAgICAgLy8gQWRkIGNoYW5uZWwgZGF0YSB0byB0aGUgYnVmZmVyXFxuICAgICAgdGhpcy5idWZmZXIucHVzaCguLi5jaGFubmVsRGF0YSk7XFxuICAgICAgLy8gR2V0IG1heCB2b2x1bWUgXFxuICAgICAgbGV0IHN1bSA9IDAuMDtcXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW5uZWxEYXRhLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICBzdW0gKz0gY2hhbm5lbERhdGFbaV0gKiBjaGFubmVsRGF0YVtpXTtcXG4gICAgICB9XFxuICAgICAgY29uc3QgbWF4Vm9sdW1lID0gTWF0aC5zcXJ0KHN1bSAvIGNoYW5uZWxEYXRhLmxlbmd0aCk7XFxuICAgICAgLy8gQ2hlY2sgaWYgYnVmZmVyIHNpemUgaGFzIHJlYWNoZWQgb3IgZXhjZWVkZWQgdGhlIHRocmVzaG9sZFxcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gdGhpcy5idWZmZXJTaXplKSB7XFxuICAgICAgICBjb25zdCBmbG9hdDMyQXJyYXkgPSB0aGlzLmlzTXV0ZWQgXFxuICAgICAgICAgID8gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGgpXFxuICAgICAgICAgIDogbmV3IEZsb2F0MzJBcnJheSh0aGlzLmJ1ZmZlcik7XFxuXFxuICAgICAgICBsZXQgZW5jb2RlZEFycmF5ID0gdGhpcy5mb3JtYXQgPT09IFwidWxhd1wiXFxuICAgICAgICAgID8gbmV3IFVpbnQ4QXJyYXkoZmxvYXQzMkFycmF5Lmxlbmd0aClcXG4gICAgICAgICAgOiBuZXcgSW50MTZBcnJheShmbG9hdDMyQXJyYXkubGVuZ3RoKTtcXG5cXG4gICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgRmxvYXQzMkFycmF5IGFuZCBjb252ZXJ0IGVhY2ggc2FtcGxlIHRvIFBDTTE2XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZsb2F0MzJBcnJheS5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgICAvLyBDbGFtcCB0aGUgdmFsdWUgdG8gdGhlIHJhbmdlIFstMSwgMV1cXG4gICAgICAgICAgbGV0IHNhbXBsZSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBmbG9hdDMyQXJyYXlbaV0pKTtcXG5cXG4gICAgICAgICAgLy8gU2NhbGUgdGhlIHNhbXBsZSB0byB0aGUgcmFuZ2UgWy0zMjc2OCwgMzI3NjddXFxuICAgICAgICAgIGxldCB2YWx1ZSA9IHNhbXBsZSA8IDAgPyBzYW1wbGUgKiAzMjc2OCA6IHNhbXBsZSAqIDMyNzY3O1xcbiAgICAgICAgICBpZiAodGhpcy5mb3JtYXQgPT09IFwidWxhd1wiKSB7XFxuICAgICAgICAgICAgdmFsdWUgPSBlbmNvZGVTYW1wbGUoTWF0aC5yb3VuZCh2YWx1ZSkpO1xcbiAgICAgICAgICB9XFxuXFxuICAgICAgICAgIGVuY29kZWRBcnJheVtpXSA9IHZhbHVlO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy8gU2VuZCB0aGUgYnVmZmVyZWQgZGF0YSB0byB0aGUgbWFpbiBzY3JpcHRcXG4gICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZShbZW5jb2RlZEFycmF5LCBtYXhWb2x1bWVdKTtcXG5cXG4gICAgICAgIC8vIENsZWFyIHRoZSBidWZmZXIgYWZ0ZXIgc2VuZGluZ1xcbiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHRydWU7IC8vIENvbnRpbnVlIHByb2Nlc3NpbmdcXG4gIH1cXG59XFxucmVnaXN0ZXJQcm9jZXNzb3IoXCJyYXctYXVkaW8tcHJvY2Vzc29yXCIsIFJhd0F1ZGlvUHJvY2Vzc29yKTtcXG4nKTtjbGFzcyBTe3N0YXRpYyBhc3luYyBjcmVhdGUoe3NhbXBsZVJhdGU6ZSxmb3JtYXQ6dCxwcmVmZXJIZWFkcGhvbmVzRm9ySW9zRGV2aWNlczpufSl7bGV0IHM9bnVsbCxvPW51bGw7dHJ5e2NvbnN0IGE9e3NhbXBsZVJhdGU6e2lkZWFsOmV9LGVjaG9DYW5jZWxsYXRpb246e2lkZWFsOiEwfSxub2lzZVN1cHByZXNzaW9uOntpZGVhbDohMH19O2lmKHYoKSYmbil7Y29uc3QgZT0oYXdhaXQgd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKS5maW5kKGU9PlwiYXVkaW9pbnB1dFwiPT09ZS5raW5kJiZbXCJhaXJwb2RcIixcImhlYWRwaG9uZVwiLFwiZWFycGhvbmVcIl0uZmluZCh0PT5lLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModCkpKTtlJiYoYS5kZXZpY2VJZD17aWRlYWw6ZS5kZXZpY2VJZH0pfWNvbnN0IGk9bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLnNhbXBsZVJhdGU7cz1uZXcgd2luZG93LkF1ZGlvQ29udGV4dChpP3tzYW1wbGVSYXRlOmV9Ont9KTtjb25zdCByPXMuY3JlYXRlQW5hbHlzZXIoKTtpfHxhd2FpdCBzLmF1ZGlvV29ya2xldC5hZGRNb2R1bGUoXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BhbGV4YW5kZXJvbHNlbi9saWJzYW1wbGVyYXRlLWpzQDIuMS4yL2Rpc3QvbGlic2FtcGxlcmF0ZS53b3JrbGV0LmpzXCIpLGF3YWl0IEMocy5hdWRpb1dvcmtsZXQpLG89YXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe2F1ZGlvOmF9KTtjb25zdCBjPXMuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobyksbD1uZXcgQXVkaW9Xb3JrbGV0Tm9kZShzLFwicmF3LWF1ZGlvLXByb2Nlc3NvclwiKTtyZXR1cm4gbC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwic2V0Rm9ybWF0XCIsZm9ybWF0OnQsc2FtcGxlUmF0ZTplfSksYy5jb25uZWN0KHIpLHIuY29ubmVjdChsKSxhd2FpdCBzLnJlc3VtZSgpLG5ldyBTKHMscixsLG8pfWNhdGNoKGUpe3ZhciBhLGk7dGhyb3cgbnVsbD09KGE9byl8fGEuZ2V0VHJhY2tzKCkuZm9yRWFjaChlPT5lLnN0b3AoKSksbnVsbD09KGk9cyl8fGkuY2xvc2UoKSxlfX1jb25zdHJ1Y3RvcihlLHQsbixzKXt0aGlzLmNvbnRleHQ9dm9pZCAwLHRoaXMuYW5hbHlzZXI9dm9pZCAwLHRoaXMud29ya2xldD12b2lkIDAsdGhpcy5pbnB1dFN0cmVhbT12b2lkIDAsdGhpcy5jb250ZXh0PWUsdGhpcy5hbmFseXNlcj10LHRoaXMud29ya2xldD1uLHRoaXMuaW5wdXRTdHJlYW09c31hc3luYyBjbG9zZSgpe3RoaXMuaW5wdXRTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChlPT5lLnN0b3AoKSksYXdhaXQgdGhpcy5jb250ZXh0LmNsb3NlKCl9c2V0TXV0ZWQoZSl7dGhpcy53b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6XCJzZXRNdXRlZFwiLGlzTXV0ZWQ6ZX0pfX1jb25zdCBNPWsoXCJhdWRpby1jb25jYXQtcHJvY2Vzc29yXCIsJ1xcbmNvbnN0IGRlY29kZVRhYmxlID0gWzAsMTMyLDM5Niw5MjQsMTk4MCw0MDkyLDgzMTYsMTY3NjRdO1xcblxcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVTYW1wbGUobXVMYXdTYW1wbGUpIHtcXG4gIGxldCBzaWduO1xcbiAgbGV0IGV4cG9uZW50O1xcbiAgbGV0IG1hbnRpc3NhO1xcbiAgbGV0IHNhbXBsZTtcXG4gIG11TGF3U2FtcGxlID0gfm11TGF3U2FtcGxlO1xcbiAgc2lnbiA9IChtdUxhd1NhbXBsZSAmIDB4ODApO1xcbiAgZXhwb25lbnQgPSAobXVMYXdTYW1wbGUgPj4gNCkgJiAweDA3O1xcbiAgbWFudGlzc2EgPSBtdUxhd1NhbXBsZSAmIDB4MEY7XFxuICBzYW1wbGUgPSBkZWNvZGVUYWJsZVtleHBvbmVudF0gKyAobWFudGlzc2EgPDwgKGV4cG9uZW50KzMpKTtcXG4gIGlmIChzaWduICE9PSAwKSBzYW1wbGUgPSAtc2FtcGxlO1xcblxcbiAgcmV0dXJuIHNhbXBsZTtcXG59XFxuXFxuY2xhc3MgQXVkaW9Db25jYXRQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3Ige1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHN1cGVyKCk7XFxuICAgIHRoaXMuYnVmZmVycyA9IFtdOyAvLyBJbml0aWFsaXplIGFuIGVtcHR5IGJ1ZmZlclxcbiAgICB0aGlzLmN1cnNvciA9IDA7XFxuICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IG51bGw7XFxuICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSBmYWxzZTtcXG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xcbiAgICBcXG4gICAgdGhpcy5wb3J0Lm9ubWVzc2FnZSA9ICh7IGRhdGEgfSkgPT4ge1xcbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XFxuICAgICAgICBjYXNlIFwic2V0Rm9ybWF0XCI6XFxuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gZGF0YS5mb3JtYXQ7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgY2FzZSBcImJ1ZmZlclwiOlxcbiAgICAgICAgICB0aGlzLndhc0ludGVycnVwdGVkID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKFxcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIlxcbiAgICAgICAgICAgICAgPyBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlcilcXG4gICAgICAgICAgICAgIDogbmV3IEludDE2QXJyYXkoZGF0YS5idWZmZXIpXFxuICAgICAgICAgICk7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgY2FzZSBcImludGVycnVwdFwiOlxcbiAgICAgICAgICB0aGlzLndhc0ludGVycnVwdGVkID0gdHJ1ZTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFwiY2xlYXJJbnRlcnJ1cHRlZFwiOlxcbiAgICAgICAgICBpZiAodGhpcy53YXNJbnRlcnJ1cHRlZCkge1xcbiAgICAgICAgICAgIHRoaXMud2FzSW50ZXJydXB0ZWQgPSBmYWxzZTtcXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSBudWxsO1xcbiAgICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9O1xcbiAgfVxcbiAgcHJvY2VzcyhfLCBvdXRwdXRzKSB7XFxuICAgIGxldCBmaW5pc2hlZCA9IGZhbHNlO1xcbiAgICBjb25zdCBvdXRwdXQgPSBvdXRwdXRzWzBdWzBdO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dC5sZW5ndGg7IGkrKykge1xcbiAgICAgIGlmICghdGhpcy5jdXJyZW50QnVmZmVyKSB7XFxuICAgICAgICBpZiAodGhpcy5idWZmZXJzLmxlbmd0aCA9PT0gMCkge1xcbiAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcbiAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gdGhpcy5idWZmZXJzLnNoaWZ0KCk7XFxuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XFxuICAgICAgfVxcblxcbiAgICAgIGxldCB2YWx1ZSA9IHRoaXMuY3VycmVudEJ1ZmZlclt0aGlzLmN1cnNvcl07XFxuICAgICAgaWYgKHRoaXMuZm9ybWF0ID09PSBcInVsYXdcIikge1xcbiAgICAgICAgdmFsdWUgPSBkZWNvZGVTYW1wbGUodmFsdWUpO1xcbiAgICAgIH1cXG4gICAgICBvdXRwdXRbaV0gPSB2YWx1ZSAvIDMyNzY4O1xcbiAgICAgIHRoaXMuY3Vyc29yKys7XFxuXFxuICAgICAgaWYgKHRoaXMuY3Vyc29yID49IHRoaXMuY3VycmVudEJ1ZmZlci5sZW5ndGgpIHtcXG4gICAgICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IG51bGw7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGlmICh0aGlzLmZpbmlzaGVkICE9PSBmaW5pc2hlZCkge1xcbiAgICAgIHRoaXMuZmluaXNoZWQgPSBmaW5pc2hlZDtcXG4gICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoeyB0eXBlOiBcInByb2Nlc3NcIiwgZmluaXNoZWQgfSk7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIHRydWU7IC8vIENvbnRpbnVlIHByb2Nlc3NpbmdcXG4gIH1cXG59XFxuXFxucmVnaXN0ZXJQcm9jZXNzb3IoXCJhdWRpby1jb25jYXQtcHJvY2Vzc29yXCIsIEF1ZGlvQ29uY2F0UHJvY2Vzc29yKTtcXG4nKTtjbGFzcyBJe3N0YXRpYyBhc3luYyBjcmVhdGUoe3NhbXBsZVJhdGU6ZSxmb3JtYXQ6dH0pe2xldCBuPW51bGw7dHJ5e249bmV3IEF1ZGlvQ29udGV4dCh7c2FtcGxlUmF0ZTplfSk7Y29uc3Qgcz1uLmNyZWF0ZUFuYWx5c2VyKCksbz1uLmNyZWF0ZUdhaW4oKTtvLmNvbm5lY3Qocykscy5jb25uZWN0KG4uZGVzdGluYXRpb24pLGF3YWl0IE0obi5hdWRpb1dvcmtsZXQpO2NvbnN0IGE9bmV3IEF1ZGlvV29ya2xldE5vZGUobixcImF1ZGlvLWNvbmNhdC1wcm9jZXNzb3JcIik7cmV0dXJuIGEucG9ydC5wb3N0TWVzc2FnZSh7dHlwZTpcInNldEZvcm1hdFwiLGZvcm1hdDp0fSksYS5jb25uZWN0KG8pLGF3YWl0IG4ucmVzdW1lKCksbmV3IEkobixzLG8sYSl9Y2F0Y2goZSl7dmFyIHM7dGhyb3cgbnVsbD09KHM9bil8fHMuY2xvc2UoKSxlfX1jb25zdHJ1Y3RvcihlLHQsbixzKXt0aGlzLmNvbnRleHQ9dm9pZCAwLHRoaXMuYW5hbHlzZXI9dm9pZCAwLHRoaXMuZ2Fpbj12b2lkIDAsdGhpcy53b3JrbGV0PXZvaWQgMCx0aGlzLmNvbnRleHQ9ZSx0aGlzLmFuYWx5c2VyPXQsdGhpcy5nYWluPW4sdGhpcy53b3JrbGV0PXN9YXN5bmMgY2xvc2UoKXthd2FpdCB0aGlzLmNvbnRleHQuY2xvc2UoKX19Y2xhc3MgRiBleHRlbmRzIGl7c3RhdGljIGFzeW5jIHN0YXJ0U2Vzc2lvbihlKXt2YXIgdDtjb25zdCBuPWkuZ2V0RnVsbE9wdGlvbnMoZSk7bi5vblN0YXR1c0NoYW5nZSh7c3RhdHVzOlwiY29ubmVjdGluZ1wifSksbi5vbkNhblNlbmRGZWVkYmFja0NoYW5nZSh7Y2FuU2VuZEZlZWRiYWNrOiExfSk7bGV0IHM9bnVsbCxhPW51bGwscj1udWxsLGM9bnVsbCxsPW51bGw7aWYobnVsbD09KHQ9ZS51c2VXYWtlTG9jayl8fHQpdHJ5e2w9YXdhaXQgbmF2aWdhdG9yLndha2VMb2NrLnJlcXVlc3QoXCJzY3JlZW5cIil9Y2F0Y2goZSl7fXRyeXt2YXIgdTtyZXR1cm4gYz1hd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7YXVkaW86ITB9KSxhd2FpdCBmKG4uY29ubmVjdGlvbkRlbGF5KSxhPWF3YWl0IGcoZSksW3Mscl09YXdhaXQgUHJvbWlzZS5hbGwoW1MuY3JlYXRlKG8oe30sYS5pbnB1dEZvcm1hdCx7cHJlZmVySGVhZHBob25lc0Zvcklvc0RldmljZXM6ZS5wcmVmZXJIZWFkcGhvbmVzRm9ySW9zRGV2aWNlc30pKSxJLmNyZWF0ZShhLm91dHB1dEZvcm1hdCldKSxudWxsPT0odT1jKXx8dS5nZXRUcmFja3MoKS5mb3JFYWNoKGU9PmUuc3RvcCgpKSxjPW51bGwsbmV3IEYobixhLHMscixsKX1jYXRjaChlKXt2YXIgZCxoLHAsbTtuLm9uU3RhdHVzQ2hhbmdlKHtzdGF0dXM6XCJkaXNjb25uZWN0ZWRcIn0pLG51bGw9PShkPWMpfHxkLmdldFRyYWNrcygpLmZvckVhY2goZT0+ZS5zdG9wKCkpLG51bGw9PShoPWEpfHxoLmNsb3NlKCksYXdhaXQobnVsbD09KHA9cyk/dm9pZCAwOnAuY2xvc2UoKSksYXdhaXQobnVsbD09KG09cik/dm9pZCAwOm0uY2xvc2UoKSk7dHJ5e3ZhciB2O2F3YWl0KG51bGw9PSh2PWwpP3ZvaWQgMDp2LnJlbGVhc2UoKSksbD1udWxsfWNhdGNoKGUpe310aHJvdyBlfX1jb25zdHJ1Y3RvcihlLHQsbixzLG8pe3N1cGVyKGUsdCksdGhpcy5pbnB1dD12b2lkIDAsdGhpcy5vdXRwdXQ9dm9pZCAwLHRoaXMud2FrZUxvY2s9dm9pZCAwLHRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhPXZvaWQgMCx0aGlzLm91dHB1dEZyZXF1ZW5jeURhdGE9dm9pZCAwLHRoaXMub25JbnB1dFdvcmtsZXRNZXNzYWdlPWU9PntcImNvbm5lY3RlZFwiPT09dGhpcy5zdGF0dXMmJnRoaXMuY29ubmVjdGlvbi5zZW5kTWVzc2FnZSh7dXNlcl9hdWRpb19jaHVuazp5KGUuZGF0YVswXS5idWZmZXIpfSl9LHRoaXMub25PdXRwdXRXb3JrbGV0TWVzc2FnZT0oe2RhdGE6ZX0pPT57XCJwcm9jZXNzXCI9PT1lLnR5cGUmJnRoaXMudXBkYXRlTW9kZShlLmZpbmlzaGVkP1wibGlzdGVuaW5nXCI6XCJzcGVha2luZ1wiKX0sdGhpcy5hZGRBdWRpb0Jhc2U2NENodW5rPWU9Pnt0aGlzLm91dHB1dC5nYWluLmdhaW4udmFsdWU9dGhpcy52b2x1bWUsdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwiY2xlYXJJbnRlcnJ1cHRlZFwifSksdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwiYnVmZmVyXCIsYnVmZmVyOl8oZSl9KX0sdGhpcy5mYWRlT3V0QXVkaW89KCk9Pnt0aGlzLnVwZGF0ZU1vZGUoXCJsaXN0ZW5pbmdcIiksdGhpcy5vdXRwdXQud29ya2xldC5wb3J0LnBvc3RNZXNzYWdlKHt0eXBlOlwiaW50ZXJydXB0XCJ9KSx0aGlzLm91dHB1dC5nYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxZS00LHRoaXMub3V0cHV0LmNvbnRleHQuY3VycmVudFRpbWUrMiksc2V0VGltZW91dCgoKT0+e3RoaXMub3V0cHV0LmdhaW4uZ2Fpbi52YWx1ZT10aGlzLnZvbHVtZSx0aGlzLm91dHB1dC53b3JrbGV0LnBvcnQucG9zdE1lc3NhZ2Uoe3R5cGU6XCJjbGVhckludGVycnVwdGVkXCJ9KX0sMmUzKX0sdGhpcy5jYWxjdWxhdGVWb2x1bWU9ZT0+e2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gMDtsZXQgdD0wO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXQrPWVbbl0vMjU1O3JldHVybiB0Lz1lLmxlbmd0aCx0PDA/MDp0PjE/MTp0fSx0aGlzLmlucHV0PW4sdGhpcy5vdXRwdXQ9cyx0aGlzLndha2VMb2NrPW8sdGhpcy5pbnB1dC53b3JrbGV0LnBvcnQub25tZXNzYWdlPXRoaXMub25JbnB1dFdvcmtsZXRNZXNzYWdlLHRoaXMub3V0cHV0LndvcmtsZXQucG9ydC5vbm1lc3NhZ2U9dGhpcy5vbk91dHB1dFdvcmtsZXRNZXNzYWdlfWFzeW5jIGhhbmRsZUVuZFNlc3Npb24oKXthd2FpdCBzdXBlci5oYW5kbGVFbmRTZXNzaW9uKCk7dHJ5e3ZhciBlO2F3YWl0KG51bGw9PShlPXRoaXMud2FrZUxvY2spP3ZvaWQgMDplLnJlbGVhc2UoKSksdGhpcy53YWtlTG9jaz1udWxsfWNhdGNoKGUpe31hd2FpdCB0aGlzLmlucHV0LmNsb3NlKCksYXdhaXQgdGhpcy5vdXRwdXQuY2xvc2UoKX1oYW5kbGVJbnRlcnJ1cHRpb24oZSl7c3VwZXIuaGFuZGxlSW50ZXJydXB0aW9uKGUpLHRoaXMuZmFkZU91dEF1ZGlvKCl9aGFuZGxlQXVkaW8oZSl7dGhpcy5sYXN0SW50ZXJydXB0VGltZXN0YW1wPD1lLmF1ZGlvX2V2ZW50LmV2ZW50X2lkJiYodGhpcy5vcHRpb25zLm9uQXVkaW8oZS5hdWRpb19ldmVudC5hdWRpb19iYXNlXzY0KSx0aGlzLmFkZEF1ZGlvQmFzZTY0Q2h1bmsoZS5hdWRpb19ldmVudC5hdWRpb19iYXNlXzY0KSx0aGlzLmN1cnJlbnRFdmVudElkPWUuYXVkaW9fZXZlbnQuZXZlbnRfaWQsdGhpcy51cGRhdGVDYW5TZW5kRmVlZGJhY2soKSx0aGlzLnVwZGF0ZU1vZGUoXCJzcGVha2luZ1wiKSl9c2V0TWljTXV0ZWQoZSl7dGhpcy5pbnB1dC5zZXRNdXRlZChlKX1nZXRJbnB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl7cmV0dXJuIG51bGwhPXRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhfHwodGhpcy5pbnB1dEZyZXF1ZW5jeURhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5pbnB1dC5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCkpLHRoaXMuaW5wdXQuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5pbnB1dEZyZXF1ZW5jeURhdGEpLHRoaXMuaW5wdXRGcmVxdWVuY3lEYXRhfWdldE91dHB1dEJ5dGVGcmVxdWVuY3lEYXRhKCl7cmV0dXJuIG51bGwhPXRoaXMub3V0cHV0RnJlcXVlbmN5RGF0YXx8KHRoaXMub3V0cHV0RnJlcXVlbmN5RGF0YT1uZXcgVWludDhBcnJheSh0aGlzLm91dHB1dC5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCkpLHRoaXMub3V0cHV0LmFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKHRoaXMub3V0cHV0RnJlcXVlbmN5RGF0YSksdGhpcy5vdXRwdXRGcmVxdWVuY3lEYXRhfWdldElucHV0Vm9sdW1lKCl7cmV0dXJuIHRoaXMuY2FsY3VsYXRlVm9sdW1lKHRoaXMuZ2V0SW5wdXRCeXRlRnJlcXVlbmN5RGF0YSgpKX1nZXRPdXRwdXRWb2x1bWUoKXtyZXR1cm4gdGhpcy5jYWxjdWxhdGVWb2x1bWUodGhpcy5nZXRPdXRwdXRCeXRlRnJlcXVlbmN5RGF0YSgpKX19ZnVuY3Rpb24gRChlLHQsbj1cImh0dHBzOi8vYXBpLmVsZXZlbmxhYnMuaW9cIil7cmV0dXJuIGZldGNoKGAke259L3YxL2NvbnZhaS9jb252ZXJzYXRpb25zLyR7ZX0vZmVlZGJhY2tgLHttZXRob2Q6XCJQT1NUXCIsYm9keTpKU09OLnN0cmluZ2lmeSh7ZmVlZGJhY2s6dD9cImxpa2VcIjpcImRpc2xpa2VcIn0pLGhlYWRlcnM6e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9fSl9Y2xhc3MgeCBleHRlbmRzIGl7c3RhdGljIHN0YXJ0U2Vzc2lvbihlKXtyZXR1cm4gZS50ZXh0T25seT93LnN0YXJ0U2Vzc2lvbihlKTpGLnN0YXJ0U2Vzc2lvbihlKX19ZXhwb3J0e3ggYXMgQ29udmVyc2F0aW9uLG0gYXMgV2ViUlRDQ29ubmVjdGlvbixwIGFzIFdlYlNvY2tldENvbm5lY3Rpb24sZyBhcyBjcmVhdGVDb25uZWN0aW9uLEQgYXMgcG9zdE92ZXJhbGxGZWVkYmFja307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWIubW9kZXJuLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@11labs/client/dist/lib.modern.js\n");

/***/ })

};
;